## 基础

- 关键业绩指标（Key Performance Indicator，KPI）

- 有两种共享方式：互斥共享和同时共享。互斥共享的资源称为临界资源

- 虚拟技术把一个物理实体转换为多个逻辑实体。

  主要有两种虚拟技术：时（时间）分复用技术和空（空间）分复用技术。

- 进程管理、内存管理、文件管理、设备管理

- 如果一个进程在用户态需要使用内核态的功能，就进行系统调用从而陷入内核，由操作系统代为完成。

- 进程是资源分配的基本单位。线程是独立调度的基本单位。

- 对临界资源进行访问的那段代码称为临界区。

- 一些操作需要被设计成原语，不可分割，通常的做法是在执行这些操作的时候屏蔽中断。

- 管程有一个重要特性：在一个时刻只能有一个进程使用管程。进程在无法继续执行的时候不能一直占用管程，否则其它进程永远不能使用管程。

- 进程通信的方式：管道（父子线程）、命名管道（FIFO）、消息队列、信号量、共享存储、套接字

- 虚拟内存：扩充、映射、页、连续、缺页中断

- 内存管理单元（MMU）管理着地址空间和物理内存的转换，其中的页表（Page table）存储着页（程序地址空间）和页框（物理内存空间）的映射表。

- 页面置换算法

- 分页、分段、段页式：分页主要用于实现虚拟内存，从而获得更大的地址空间；分段主要是为了使程序和数据可以被划分为逻辑上独立的地址空间并且有助于共享和保护。

- 磁盘调度算法：先来先服务FCFS、最短寻道时间优先SSTF、电梯算法SCAN

- 静态链接、动态链接

- GNU 计划，它的目标是创建一套完全自由的操作系统，称为 GNU，其内容软件完全以 GPL 方式发布。其中 GPL 全称为 GNU 通用公共许可协议（GNU General Public License），包含了以下内容：

    - 以任何目的运行此程序的自由；
    - 再复制的自由；
    - 改进此程序，并公开发布改进的自由

- 磁盘接口：IDE（ATA）、SATA、SCSI、SAS

- 磁盘分区表主要有两种格式，一种是限制较多的 MBR 分区表，一种是较新且限制较少的 GPT 分区表。

- BIOS（Basic Input/Output System，基本输入输出系统），它是一个固件（嵌入在硬件中的软件），BIOS 程序存放在断电后内容不会丢失的只读内存中。

  BIOS 是开机的时候计算机执行的第一个程序，这个程序知道可以开机的磁盘，并读取磁盘第一个扇区的主要开机记录（MBR），由主要开机记录（MBR）执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。

  主要开机记录（MBR）中的开机管理程序提供以下功能：选单、载入核心文件以及转交其它开机管理程序。转交这个功能可以用来实现多重引导，只需要将另一个操作系统的开机管理程序安装在其它分区的启动扇区上，在启动开机管理程序时，就可以通过选单选择启动当前的操作系统或者转交给其它开机管理程序从而启动另一个操作系统。

  BIOS 不可以读取 GPT 分区表，而 UEFI 可以。

- linux文件系统权限对应的数字为：r - 4，w - 2，x - 1

- 文件名不是存储在一个文件的内容中，而是存储在一个文件所在的目录中。

- linux下指令/文件检索的一些命令：which、whereis、locate、find

- *.tar.gz 表示tar 程序打包的文件，经过 gzip 的压缩

- 可以通过 Shell 请求内核提供服务，Bash 正是 Shell 的一种。双引号内的特殊字符可以保留原本特性，单引号内的特殊字符就是特殊字符本身。Shell相关语法有机会看看。

-

有一个箭头的表示以覆盖的方式重定向，而有两个箭头的表示以追加的方式重定向。如果需要将标准输出以及标准错误输出同时重定向到一个文件，需要将某个输出转换为另一个输出，例如 2>&1 表示将标准错误输出转换为标准输出）。

- 管道是将一个命令的标准输出作为另一个命令的标准输入。在命令之间使用 | 分隔各个管道命令。

- Linux进程状态
  | 状态 | 说明 |
  | :---: | --- |
  | R | running or runnable (on run queue)<br>正在执行或者可执行，此时进程位于执行队列中。|
  | D | uninterruptible sleep (usually I/O)<br>不可中断阻塞，通常为 IO 阻塞。 |
  | S | interruptible sleep (waiting for an event to complete) <br> 可中断阻塞，此时进程正在等待某个事件完成。|
  | Z | zombie (terminated but not reaped by its parent)<br>僵死，进程已经终止但是尚未被其父进程获取信息。|
  | T | stopped (either by a job control signal or because it is being traced) <br> 结束，进程既可以被作业控制信号结束，也可能是正在被追踪。|

- 孤儿进程与僵尸进程。孤儿进程将被 init 进程（进程号为 1）所收养，并由 init 进程对它们完成状态收集工作。要消灭僵尸进程，只需要将其父进程杀死，此时僵尸进程就会变成孤儿进程，从而结束僵尸进程。

- 计算机存储补码，并用补码运算

- x&(-x)：保留二进制下最低位的1，其余位置置0（即一个数中最大的2的n次幂的因数）

  x&(x-1)：将二进制下最低位的1变为0，其余保持不变（Brian Kernighan 算法）

- 若x为2的n次幂，则 y%x 等同于 y&(x-1)

- 一些命令：[awk](https://www.lwohvye.com/2022/04/30/awk/)、sed、top
  - 查找并关闭多个服务 `ps -ef | grep eladmin-starter-3.0.3.jar | grep -v grep | awk '{print $2}' | xargs kill -15`
  - 查看进程下的线程 `ps -T -p <pid>` 或 `top -H -p <pid>`
  - 查看内存占用前10名的程序 `ps aux | sort -k4,4nr | head -n 10 `
  - 线上cpu占用过高，问题排查
    - 找到目标进程：`top -c`，就可以显示进程列表，然后输入P，按照cpu使用率排序
    - 定位耗费cpu的线程：`top -Hp <pid>`，然后输入P，按照cpu使用率排序
    - ` top -Hbp <pid> | awk '/java/ && $9>50' ` 也可这样，查找java类，且cpu占用在50以上的线程
    - `ps -mp <pid> -o THREAD,tid,time` 可以查看特定进程下线程的情况，这里输出线程信息、tid和线程运行时间
    - 把线程tid转换成16进制：`printf “%x\n” <tid>`
    - 定位哪段代码导致的cpu过高：`jstack <pid> | grep "<16进制tid>" -A 30` 或 `jstack <pid> | grep '<0x16进制tid>' -C5 --color`

- Socket建立连接的过程：Client、Server

### 事务

- 事务：原子性、一致性、隔离性、持久性

- Java 事务编程接口(JTA:Java Transaction API)和 Java 事务服务 (JTS;Java Transaction Service)

- [分布式事务](https://www.lwohvye.com/2021/11/02/%e8%bf%9b%e4%b8%80%e6%ad%a5%e5%ad%a6%e4%b9%a0%e5%88%86%e5%b8%83%e5%bc%8f%e4%ba%8b%e5%8a%a1/)

- CAP理论：一致性（强一致性、弱一致性、最终一致性）、可用性、分区容错性/分区容忍性（什么是分区）

- BASE理论：基本可用、柔性状态、最终一致性

  BASE 理论本质上是对 CAP 的延伸和补充，更具体地说，是对 CAP 中 AP 方案的一个补充。

- 分布式事务几种解决方案：

    - XA：作为资源管理器（数据库）与事务管理器的接口标准。XA协议采用两阶段提交方式来管理分布式事务。XA接口提供资源管理器与事务管理器之间进行通信的标准接口。
    - Saga：核心是补偿。Saga这种方式并不能保证隔离性，于是出现了TCC。在实际交易逻辑前先做业务检查、对涉及到的业务资源进行“预留”，或者说是一种“中间状态”，如果都预留成功则完成这些预留资源的真正业务处理。
    - TCC的特点在于业务资源检查与加锁，一阶段进行校验，资源锁定，如果第一阶段都成功，二阶段对锁定资源进行交易逻辑，否则，对锁定资源进行释放。应用实施成本较高。
    - 基于可靠消息最终一致，一阶段服务正常调用，同时同事务记录消息表，二阶段则进行消息的投递，消费。应用实施成本较低。

- 分布式事务：2PC、3PC、TCC、本地消息表

    - **2PC/3PC**：依赖于数据库，能够很好的提供强一致性和强事务性，但相对来说延迟比较高，比较适合传统的单体应用，在同一个方法中存在跨库操作的情况，不适合高并发和高性能要求的场景。
    - **TCC**：适用于执行时间确定且较短，实时性要求高，对数据一致性要求高，比如互联网金融企业最核心的三个服务：交易、支付、账务。
    - **本地消息表/MQ 事务**：都适用于事务中参与方支持操作幂等，对一致性要求不高，业务上能容忍数据不一致到一个人工检查周期，事务涉及的参与方、参与环节较少，业务上有对账/校验系统兜底。
    - **Saga 事务**：由于 Saga [ˈsɑːɡə] 事务不能保证隔离性，需要在业务层控制并发，适合于业务场景事务并发操作同一资源较少的情况。Saga 相比缺少预提交动作，导致补偿动作的实现比较麻烦，例如业务是发送短信，补偿动作则得再发送一次短信说明撤销，用户体验比较差。Saga
      事务较适用于补偿动作容易处理的场景。

- 柔性事务分为:两阶段型、补偿型、异步确保型、最大努力通知型几种。

### 网络

- 网络把主机连接起来，而互连网（internet）是把多种不同的网络连接起来，因此互连网是网络的网络。而因特网（Internet）是全球范围的互连网。

- ISP（互联网服务提供商），目前的互联网是一种多层次 ISP 结构，ISP 根据覆盖面积的大小分为第一层 ISP、区域 ISP 和接入 ISP。互联网交换点 IXP 允许两个 ISP 直接相连而不用经过第三个 ISP。

- 主机间的通信方式：C/S、P2P

- 分组交换

- 总时延 = 排队时延 + 处理时延 + 传输时延 + 传播时延

- 5层架构：应用层、传输层、网络层、链路层、物理层

    - 应用层：DNS协议、FTP协议、SMTP协议、Telnet、HTTP协议、TCP/IP协议（TCP/IP 协议不是 TCP 和 IP 这两个协议的合称，而是指因特网整个 TCP/IP 协议族）、数据包/报文
    - 传输层：传输协议、端口号、TCP协议、UDP协议、报文段
    - 网络层：IP地址、IP协议、ICMP协议（Internet控制报文协议）、IGMP协议（Internet组管理协议）。路由器、分组
    - 链路层：MAC地址、ARP协议（地址解析协议。由 IP 地址得到 MAC 地址）、RARP协议、交换机、帧
    - 物理层：比特
    - 五层协议没有OSI中的表示层和会话层，而是将这些功能留给应用程序开发者处理。
    - TCP/IP 体系结构不严格遵循 OSI 分层概念，应用层可能会直接使用 IP 层或者网络接口层（数据链路层和物理层合并为网络接口层）。
    - 在向下的过程中，需要添加下层协议所需要的首部或者尾部，而在向上的过程中不断拆开首部和尾部。
    - 路由器只有下面三层协议，因为路由器位于网络核心中，不需要为进程或者应用程序提供服务，因此也就不需要传输层和应用层。

- 信道复用技术：频分复用、时分复用

- 要稍微回顾下图解网络，再看看。

    - 各种协议
    - 一次请求的完整过程，包含数据包的传递
    - DHCP的过程：DHCP发现报文、DHCP提供报文、DHCP请求报文、DHCP ACK报文
    - TCP与UDP的区别
    - TCP三次握手、四次挥手，为什么需要这么多次，多或少可以吗？如果中间某阶段失败，会怎样。
    - TCP相关：TCP 是**面向连接的、可靠的、基于字节流**的传输层通信协议
    - TCP数据包格式：源端口号、目的端口号、序列号、确认号、首部长度、控制位（ACK、RST、SYN、FIN）、窗口大小、校验和、选项、数据
    - TCP的半连接队列（SYN队列）和全连接队列（ACCEPT队列）
    - TCP：校验和、重传机制、滑动窗口、流量控制、拥塞控制
    - TCP滑动窗口：发送窗口、接收窗口
    - TCP流量控制
    - TCP拥塞控制：慢启动、拥塞避免、快速重传、快速恢复

- IP地址由两部分组成，网络号和主机号，其中不同分类具有不同的网络号长度，并且是固定的。

  通过在主机号字段中拿一部分作为子网号，把两级 IP 地址划分为三级 IP 地址。

  无分类编址 CIDR 消除了传统 A 类、B 类和 C 类地址以及划分子网的概念，使用网络前缀和主机号来对 IP 地址进行编码，网络前缀的长度可以根据需要变化。

- HTTP是一个无状态的协议

- HTTPS(全称:Hypertext Transfer Protocol over Secure Socket Layer)，是以安全为目标的HTTP 通道。即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL。证书、对称加密、非对称加密。因为非对称加密效率低，所以一般用来加密对称加密的密钥。

- HTTPS连接建立的过程：TCP三次握手 + SSL/TLS四次通讯（ClientHello、ServerHello、客户端回应、服务器的最后回应）

- CND 一般包含分发服务系统、负载均衡系统和管理系统

- HTTP 使用 URL（ Uniform Resource Locator，统一资源定位符）来定位资源，它是 URI（Uniform Resource Identifier，统一资源标识符）的子集，URL 在 URI 的基础上增加了定位能力。URI 除了包含 URL，还包含 URN（Uniform Resource
  Name，统一资源名称），它只是用来定义一个资源的名称，并不具备定位该资源的能力

### 其他

- SaaS 是 Software-as-a-Service(软件即服务)。云计算

- PaaS 是 Platform-as-a-Service 的缩写，意思是平台即服务。 把服务器平台作为一种服务提供的 商业模式。通过网络进行程序提供的服务称之为 SaaS(Software as a Service)，而云计算时代相应的服务器平台或者开发环境作为服务进行提供就成为了 PaaS(Platform as
  a Service)。

- IaaS(Infrastructure as a Service)，即基础设施即服务。提供给消费者的服务是对所有设施的利用，包括处理、存储、网络和其它基本的计算资源，用户能够部署和运行任意软件，包括操作系统和应用程序。

- SOA是一种设计方法，其中包含多个服务，而服务之间通过配合最终会提供一系列功能。一个服务通常以独立的形式存在于操作系统进程中。服务之间通过网络调用，而非采用进程内调用的方式进行通信。

- SOA与微服务

- DDD（Domain Drive Design 领域驱动设计） [可以看看这个](https://zhuanlan.zhihu.com/p/411866735)

- Representational State Transfer(REST)/ RESTful

- `DevOps维基百科定义` DevOps（Development和Operations的组合词）是一种重视“软件开发人员（Dev）”和“IT运维技术人员（Ops）”之间沟通合作的文化、运动或惯例。透过自动化“软件交付”和“架构变更”的流程，来使得构建、测试、发布软件能够更加地快捷、频繁和可靠。

- 跨站脚本攻击（Cross-Site Scripting, XSS）

- 跨站请求伪造（Cross-site request forgery，CSRF）

- 拒绝服务攻击（denial-of-service attack，DoS）

- 分布式拒绝服务攻击（distributed denial-of-service attack，DDoS）

- 一致性哈希Distributed Hash Table（DHT） 是一种哈希分布方式，其目的是为了克服传统哈希分布在服务器节点数量变化时大量数据迁移的问题。

  将哈希空间 [0, 2n-1] 看成一个哈希环，每个服务器节点都配置到哈希环上。每个数据对象通过哈希取模得到哈希值之后，存放到哈希环中顺时针方向第一个大于等于该哈希值的节点上。

  针对一致性哈希存在数据分布不均匀的问题，增加虚拟节点，然后将虚拟节点映射到真实节点上。虚拟节点的数量比真实节点来得多，那么虚拟节点在哈希环上分布的均匀性就会比原来的真实节点好，从而使得数据分布也更加均匀。

- 设计模式相关。

- 阵列卡RAID的缓存：作用具体体现在读与写两个不同的方面：作为写，一般存储阵列只要求数据写到 Cache 就算完成了写操作，当写 Cache 的数据积累到一定程度，阵列才把数据刷到磁盘，这样可以实现批量的写入。所以，阵列的写是非常快速的。至于 Cache 数据的保护，一般都依赖于镜像与电池 ( 或者是 UPS)
  。Cache 在读数据方面的作用，当所要读取的数据能在 Cache 中命中的话，将大大减少磁盘寻道所需要的时间，存储的 Cache 大小对整个 I/O 性能的影响是非常大的。

- [从单机架构到异地多活](https://www.lwohvye.com/2022/01/05/%e4%bb%8e%e5%8d%95%e6%9c%ba%e6%9e%b6%e6%9e%84%e5%88%b0%e5%bc%82%e5%9c%b0%e5%a4%9a%e6%b4%bb/)

  

